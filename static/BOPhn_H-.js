import{a1 as tm}from"./CLygsIoC.js";import{X as nm,Q as am,c as em,Y as rm,U as sm,W as im,r as f}from"./ChaVi1sj.js";const mm={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.8,step:"any"}],domain:()=>({min:0,max:1,step:1}),isInDomain:(t,n)=>0===n||1===n,pdf(t,n){const{p:a}=t;return this.isInDomain(t,n)?1===n?a:1-a:0},cdf:(t,n)=>n<0?0:n<1?1-t.p:1,mean:t=>t.p,variance(t){const{p:n}=t;return n*(1-n)}},om={params:[{name:"n",tooltip:"隨機試驗次數",min:1,default:20,step:1},{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:t=>({min:0,max:t.n,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=0&&n<=t.n,pdf(t,n){const{n:a,p:e}=t;return this.isInDomain(t,n)&&0!==e&&1!==e?nm(a,n)*e**n*(1-e)**(a-n):0},cdf(t,n){const{n:a,p:e}=t;return n>a?1:n<0?0:am(1-e,a-n,1+n)},mean(t){const{n:n,p:a}=t;return n*a},variance(t){const{n:n,p:a}=t;return n*a*(1-a)}},cm={params:[{name:"min",tooltip:"最小值",max:t=>t.max,default:1,step:"any"},{name:"max",tooltip:"最大值",min:t=>t.min,default:100,step:"any"}],domain:t=>({...t,step:1}),isInDomain(t,n){const{min:a,max:e}=t;return Number.isInteger(n)&&a<=n&&n<=e},counts(t){const{min:n,max:a}=t;return a-n+1},pdf(t,n){return this.isInDomain(t,n)?1/this.counts(t):0},cdf(t,n){const{min:a}=t;return em((Math.floor(n)-a+1)/this.counts(t),0,1)},mean(t){const{min:n,max:a}=t;return(n+a)/2},variance(t){return(this.counts(t)**2-1)/2}},pm=[["Bernoulli",mm],["Binomial",om],["Geometric",{params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:()=>({min:1,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=1,pdf(t,n){const{p:a}=t;return this.isInDomain(t,n)?(1-a)**(n-1)*a:0},cdf(t,n){const{p:a}=t;return n<1?0:1-(1-a)**Math.floor(n)},mean(t){const{p:n}=t;return 1/n},variance(t){const{p:n}=t;return(1-n)/n**2}}],["Hypergeometric",{params:[{name:"N",tooltip:"樣品總數量",min:0,default:100},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:50},{name:"n",tooltip:"抽樣次數",min:0,max:t=>t.N,default:50}],domain(t){const{N:n,K:a,n:e}=t;return{min:Math.max(0,e+a-n),max:Math.min(e,a),step:1}},isInDomain(t,n){const{N:a,K:e,n:r}=t;return Number.isInteger(n)&&n>=Math.max(0,r+e-a)&&n<=Math.min(r,e)},pdf(t,n){const{N:a,K:e,n:r}=t;return this.isInDomain(t,n)?nm(e,n)/nm(a,r)*nm(a-e,r-n):0},cdf(t,n){n=Math.floor(n);const{N:a,K:e,n:r}=t,s=Math.max(0,r+e-a);return n<s?0:n>=Math.min(r,e)?1:rm(Array.from({length:n-s+1}),((n,a,e)=>n+this.pdf(t,s+e)))},mean(t){const{N:n,K:a,n:e}=t;return e*a/n},variance(t){const{N:n,K:a,n:e}=t;return e*a/n*(n-a)/n*(n-e)/(n-1)}}],["NegativeHypergeometric",{params:[{name:"N",tooltip:"樣品總數量",min:0,default:50},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:25},{name:"r",tooltip:"抽到不符合樣品的次數",min:0,max:t=>t.N-t.K,default:15}],domain(t){const{K:n}=t;return{min:0,max:n,step:1}},isInDomain(t,n){const{K:a}=t;return Number.isInteger(n)&&n>=0&&n<=a},pdf(t,n){const{N:a,K:e,r:r}=t;return this.isInDomain(t,n)?nm(e+r-1,n)/nm(a,e)*nm(a-r-n,e-n):0},cdf(t,n){n=Math.floor(n);const{K:a}=t;return n<0?0:n>=a?1:rm(Array.from({length:n+1}),((n,a,e)=>n+this.pdf(t,e)))},mean(t){const{N:n,K:a,r:e}=t;return e*a/(n-a+1)},variance(t){const{N:n,K:a,r:e}=t;return e*(n+1)*a/((n-a+1)*(n-a+2))*(1-e/(n-a+1))}}],["Uniform",cm]],um=tm("discrete",{state:()=>{const{t:t,i:n}=sm(pm);return{M:0,I:t,D:n,p:{v:im,m:!0},V:{_:200,h:10}}},getters:{j(){return this.l.params.map((({name:t,min:n,max:a,step:e})=>({name:t,min:"number"==typeof n?n:null==n?void 0:n(this.t),max:"number"==typeof a?a:null==a?void 0:a(this.t),step:e})))},o(){return this.l.domain(this.t)},t(){return this.I[this.M]},i(){return this.D[this.M]},l(){return pm[this.M][1]}},actions:{A(t){this.M=t},U(t,n){isNaN(+n)||(this.t[t]=+n)},N(t,n){isNaN(+n)||(this.i[t]=+n)},k(t){const{p:{v:n}}=this;return f(this.l.pdf(this.t,t),n)},u(t){const{p:{v:n,m:a}}=this,e=this.l,r=Math.min(...t),s=Math.max(...t),i=a?100:1,m=i*e.pdf(this.t,r),o=i*e.pdf(this.t,s),c=i*e.cdf(this.t,r),p=i*(1-e.cdf(this.t,s-1)),u=c+p,h=i-u+m+o;return{left:f(m,n),right:f(o,n),below:f(c,n),above:f(p,n),belowExcl:f(c-m,n),aboveExcl:f(p-o,n),between:f(h,n),outside:f(u,n)}}}});export{pm as d,um as u};