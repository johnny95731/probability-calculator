import{J as N}from"./D3-qf2Sj.js";import{O as b,P as m,Q as h,c as g,r as s,R as I,S as x}from"./D_4vyECL.js";const D={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.8,step:"any"}],domain(){return{min:0,max:1,step:1}},isInDomain(n,t){return t===0||t===1},pdf(n,t){const{p:e}=n;return this.isInDomain(n,t)?t===1?e:1-e:0},cdf(n,t){return t<0?0:t<1?1-n.p:1},mean(n){return n.p},variance(n){const{p:t}=n;return t*(1-t)}},K={params:[{name:"n",tooltip:"隨機試驗次數",min:1,default:20,step:1},{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain(n){return{min:0,max:n.n,step:1}},isInDomain(n,t){return Number.isInteger(t)&&t>=0&&t<=n.n},pdf(n,t){const{n:e,p:r}=n;return!this.isInDomain(n,t)||r===0||r===1?0:m(e,t)*r**t*(1-r)**(e-t)},cdf(n,t){const{n:e,p:r}=n;return t>e?1:t<0?0:b(1-r,e-t,1+t)},mean(n){const{n:t,p:e}=n;return t*e},variance(n){const{n:t,p:e}=n;return t*e*(1-e)}},v={params:[{name:"min",tooltip:"最小值",max:n=>n.max,default:1,step:"any"},{name:"max",tooltip:"最大值",min:n=>n.min,default:100,step:"any"}],domain(n){return{...n,step:1}},isInDomain(n,t){const{min:e,max:r}=n;return Number.isInteger(t)&&e<=t&&t<=r},counts(n){const{min:t,max:e}=n;return e-t+1},pdf(n,t){return this.isInDomain(n,t)?1/this.counts(n):0},cdf(n,t){const{min:e}=n;return g((Math.floor(t)-e+1)/this.counts(n),0,1)},mean(n){const{min:t,max:e}=n;return(t+e)/2},variance(n){return(this.counts(n)**2-1)/2}},y={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain(){return{min:1,step:1}},isInDomain(n,t){return Number.isInteger(t)&&t>=1},pdf(n,t){const{p:e}=n;return this.isInDomain(n,t)?(1-e)**(t-1)*e:0},cdf(n,t){const{p:e}=n;return t<1?0:1-(1-e)**Math.floor(t)},mean(n){const{p:t}=n;return 1/t},variance(n){const{p:t}=n;return(1-t)/t**2}},M={params:[{name:"N",tooltip:"樣品總數量",min:0,default:100},{name:"K",tooltip:"符合樣品數量",min:0,max:n=>n.N,default:50},{name:"n",tooltip:"抽樣次數",min:0,max:n=>n.N,default:50}],domain(n){const{N:t,K:e,n:r}=n;return{min:Math.max(0,r+e-t),max:Math.min(r,e),step:1}},isInDomain(n,t){const{N:e,K:r,n:i}=n;return Number.isInteger(t)&&t>=Math.max(0,i+r-e)&&t<=Math.min(i,r)},pdf(n,t){const{N:e,K:r,n:i}=n;return this.isInDomain(n,t)?m(r,t)/m(e,i)*m(e-r,i-t):0},cdf(n,t){t=Math.floor(t);const{N:e,K:r,n:i}=n,a=Math.max(0,i+r-e);return t<a?0:t>=Math.min(i,r)?1:h(Array.from({length:t-a+1}),(o,c,u)=>o+this.pdf(n,a+u))},mean(n){const{N:t,K:e,n:r}=n;return r*e/t},variance(n){const{N:t,K:e,n:r}=n;return r*e/t*(t-e)/t*(t-r)/(t-1)}},P={params:[{name:"N",tooltip:"樣品總數量",min:0,default:50},{name:"K",tooltip:"符合樣品數量",min:0,max:n=>n.N,default:25},{name:"r",tooltip:"抽到不符合樣品的次數",min:0,max:n=>n.N-n.K,default:15}],domain(n){const{K:t}=n;return{min:0,max:t,step:1}},isInDomain(n,t){const{K:e}=n;return Number.isInteger(t)&&t>=0&&t<=e},pdf(n,t){const{N:e,K:r,r:i}=n;return this.isInDomain(n,t)?m(r+i-1,t)/m(e,r)*m(e-i-t,r-t):0},cdf(n,t){t=Math.floor(t);const{K:e}=n;return t<0?0:t>=e?1:h(Array.from({length:t+1}),(r,i,a)=>r+this.pdf(n,a))},mean(n){const{N:t,K:e,r}=n;return r*e/(t-e+1)},variance(n){const{N:t,K:e,r}=n;return r*(t+1)*e/((t-e+1)*(t-e+2))*(1-r/(t-e+1))}},d=[["Bernoulli",D],["Binomial",K],["Geometric",y],["Hypergeometric",M],["NegativeHypergeometric",P],["Uniform",v]],B=N("discrete",{state:()=>{const{args_:n,vars_:t}=I(d);return{_currentIdx:0,_args:n,_vars:t,calc_:{place_:x,toPercentage_:!0},chart_:{points_:200,extended_:10}}},getters:{paramRanges_(){return this.distribution_.params.map(({name:n,min:t,max:e,step:r})=>({name:n,min:typeof t=="number"?t:t==null?void 0:t(this.args_),max:typeof e=="number"?e:e==null?void 0:e(this.args_),step:r}))},varDomain_(){return this.distribution_.domain(this.args_)},args_(){return this._args[this._currentIdx]},vars_(){return this._vars[this._currentIdx]},distribution_(){return d[this._currentIdx][1]}},actions:{setCurrent_(n){this._currentIdx=n},setArg_(n,t){isNaN(+t)||(this.args_[n]=+t)},setVars_(n,t){isNaN(+t)||(this.vars_[n]=+t)},pdf_(n){const{calc_:{place_:t}}=this;return s(this.distribution_.pdf(this.args_,n),t)},calcProb_(n){const{calc_:{place_:t,toPercentage_:e}}=this,r=this.distribution_,i=Math.min(...n),a=Math.max(...n),o=e?100:1,c=o*r.pdf(this.args_,i),u=o*r.pdf(this.args_,a),p=o*r.cdf(this.args_,i),f=o*(1-r.cdf(this.args_,a-1)),l=p+f,_=o-l+c+u;return{left:s(c,t),right:s(u,t),below:s(p,t),above:s(f,t),belowExcl:s(p-c,t),aboveExcl:s(f-u,t),between:s(_,t),outside:s(l,t)}}}});export{d,B as u};
