import{v as e,x as t,I as a,J as l,d as s,K as o,y as r,L as i,F as n,E as u,z as d,C as b,j as p,H as m,B as P,A as c,G as A,D as B,t as $,M as g,N as h}from"./CtjArZXg.js";import{_ as x}from"./BCo6x5W8.js";import{V as f,P as y,a as v,b as _,c as w}from"./BcjAR2DG.js";import{c as I}from"./CI-EUnBD.js";import{u as j}from"./BfI8O18t.js";import{V as k}from"./DcdVAVtH.js";import"./CXSECAqa.js";import"./Df3AbMAx.js";import"./spB-b5gK.js";import"./DuUtBnw_.js";const T={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 360 240","stroke-width":"1",width:"100%",fill:"none",style:{"aspect-ratio":"9 / 5"}};const V=Object.assign(x({},[["render",function(l,s){return t(),e("svg",T,s[0]||(s[0]=[a('<circle cx="130" cy="120" r="100" fill="#ff7"></circle><circle cx="230" cy="120" r="100" fill="#7ff"></circle><path d="M180 33 a100 100 0 0 0 0 174 a100 100 0 0 0 0 -174 z" fill="#7fff80"></path><circle cx="130" cy="120" r="100" stroke="#000"></circle><circle cx="230" cy="120" r="100" stroke="#000"></circle><rect x="0" y="0" width="360" height="240" stroke="#000"></rect><g text-anchor="middle" stroke="none" fill="#000" font-size="30px" font-weight="bold"><text x="90" y="132">A</text><text x="180" y="132">A⋂B</text><text x="270" y="132">B</text></g>',7)]))}]]),{__name:"EulerDiagram"}),E=e=>e>=0&&e<=1,U={a:"A",b:"B",u:"A⋃B",i:"A⋂B",p:"A'",c:"A|B",ci:"B|A"};["a","b","u","i","s","p","c","ci"].forEach((e=>U[U[e]]=e));const O=(e,t)=>{const a=e.includes("u"),l=e.includes("i"),s=[D];return a&&s.push(M),l&&s.push(N),{keys:e,validator:s,formula:t}},D=e=>Object.values(e).every((e=>E(e)))?null:"事件機率需介於0~1。",M=e=>!(e.a>e.u||e.b>e.u)?null:"事件聯集的機率不能小於個別事件發生的機率。",N=e=>!(e.a<e.i||e.b<e.i)?null:"事件交集的機率不能大於個別事件發生的機率。",z=["A","A⋂B","A⋃B","AΔB"],F={A:[O(["p"],(e=>["1 - P(A')",`1 - ${e.p}`,""+(1-e.p)])),O(["b","i"],(e=>["P(A⋂B) / P(B)",`${e.i} / ${e.b}`,""+e.i/e.b])),O(["b","u"],(e=>["P(A⋂B') / P(B')","(P(A⋃B) - P(B)) / (1 - P(B))",`(${e.u} - ${e.b}) / (1 - ${e.b})`,""+(e.u-e.b)/(1-e.b)]))],"A⋂B":[O(["a","u"],(e=>["(P(A⋃B) - P(A)) * P(A) / (1 - P(A))",`(${e.u} - ${e.a}) * ${e.a} / (1 - ${e.a})`,""+(e.u-e.a)*e.a/(1-e.a)])),O(["b","u"],(e=>["(P(A⋃B) - P(B)) * P(B) / (1 - P(B))",`(${e.u} - ${e.b}) * ${e.b} / (1 - ${e.b})`,""+(e.u-e.b)*e.b/(1-e.b)])),O(["a","b"],(e=>["P(A) * P(B)",`${e.a} * ${e.b}`,""+e.a*e.b]))],"A⋃B":[O(["a","i"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(A⋂B) / P(A) - P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - ${e.i}`,""+(e.a+e.i/e.a-e.i)])),O(["b","i"],(e=>["P(A) + P(B) - P(A⋂B)","P(A⋂B) / P(B) + P(B) - P(A⋂B)",`${e.b} + ${e.i} / ${e.b} - ${e.i}`,""+(e.i/e.b+e.b-e.i)])),O(["a","b"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B)",`${e.a} + ${e.b} - ${e.a} * ${e.b}`,""+(e.b/e.a+e.a-e.b)]))],"AΔB":[O(["a","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,""+(e.a+e.i/e.a-2*e.i)])),O(["b","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A⋂B) / P(B) + P(B) - 2 * P(A⋂B)",`${e.i} / ${e.b} + ${e.b} - 2 * ${e.i}`,""+(e.b+e.i/e.b-2*e.i)])),O(["a","b"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * P(A) * P(B)",`${e.a} + ${e.b} - 2 * ${e.a} * ${e.b}`,""+(e.a+e.b-2*e.a*e.b)]))]},C=l("independent",{state:()=>{const e={target:z[0],optionIdx:0};for(const t of z)e[t]=[],F[t].forEach(((a,l)=>{e[t][l]=a.keys.reduce(((e,t)=>(e[t]=0,e)),{})}));return e},getters:{optionItem(){return F[this.target][this.optionIdx]},params(){return this.optionItem.keys.map((e=>({key:e,label:U[e]})))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[E(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map((e=>e(this.args)))].join("\n")}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=I(t,0,1))}}}),G={class:"formula-table"},H={key:0},J=s({__name:"FormulaTable",props:{title:{},formula:{}},setup:a=>(a,l)=>(t(),e("table",G,[a.title||a.$slots.title?(t(),e("caption",H,[i(a.$slots,"title",{},(()=>[b(d(a.title),1)]))])):o("",!0),r("tbody",null,[(t(!0),e(n,null,u(a.formula,((a,l)=>(t(),e("tr",{key:l},[(t(!0),e(n,null,u(a,(a=>(t(),e("td",{key:`${l}-${a}`},d(a),1)))),128))])))),128))])]))}),K=Object.assign(J,{__name:"FormulaTable"}),L={class:"w-50 mx-auto"},q=s({__name:"IndependentEvent",setup(a){const l=C(),s=z.map((e=>({title:`P(${e})`,value:e}))),o=z.reduce(((e,t)=>(e[t]=F[t].map(((e,t)=>({title:e.keys.map((e=>`P(${U[e]})`)).join(", "),value:t}))),e)),{}),i=p({get:()=>l[l.target][l.optionIdx],set([e,t]){l.setArg(e,t)}}),d=p((()=>l.formula.map(((e,t)=>0===t?[`P(${l.target})`,"= "+e]:[null,"= "+e]))));return(a,p)=>{const $=V,g=y,h=v;return t(),m(f,null,{default:P((()=>[c(_,{class:"border rounded-md px-2 py-4 text-center"},{default:P((()=>[r("div",L,[p[1]||(p[1]=b(" Euler Diagram ")),c($)]),c(g,{class:"w-100 font-weight-bold",label:"計算結果"}),c(h,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${A(l).target})=`,readonly:"",variant:"solo",flat:"","model-value":A(l).result,message:A(l).errorMessage},null,8,["prependText","model-value","message"]),c(K,{class:"mx-auto",title:"算式",formula:d.value},{title:P((()=>[c(g,{class:"w-100 font-weight-bold",label:"算式"})])),_:1},8,["formula"])])),_:1}),c(_,{class:"border rounded-md px-2 py-4",cols:"4"},{default:P((()=>[c(h,{type:"select",label:"目標",items:A(s),"model-value":A(l).target,"onUpdate:modelValue":A(l).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),c(w,{class:"my-3"}),p[0]||(B(-1,!0),(p[0]=c(g,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,B(1),p[0]),c(h,{type:"select",label:"選項",items:A(o)[A(l).target],"model-value":A(l).optionIdx,"onUpdate:modelValue":A(l).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(t(!0),e(n,null,u(A(l).params,(({key:e,label:a})=>(t(),m(h,{key:e,label:a,prependText:`P(${a})=`,min:"0",max:"1",step:"any","model-value":i.value[e],"onUpdate:modelValue":t=>A(l).setArg(e,t)},null,8,["label","prependText","model-value","onUpdate:modelValue"])))),128))])),_:1})])),_:1})}}}),Q=Object.assign(q,{__name:"EventProbabilityIndependentEvent"}),R=["A","A⋂B","A⋃B","AΔB","A|B"],S={A:[O(["p"],(e=>["1 - P(A')",`1 - ${e.p}`,""+(1-e.p)])),O(["b","i","u"],(e=>["P(A⋃B) - P(B) + P(A⋂B)",`${e.u} - ${e.b} + ${e.i}`,`${e.u-e.b+e.i}`])),O(["b","ci"],(e=>["P(A⋂B) / P(B|A)",`${e.i} / ${e.ci}`,""+e.i/e.ci]))],"A⋂B":[O(["a","b","u"],(e=>["P(A) + P(B) - P(A⋃B)",`${e.a} + ${e.b} - ${e.u}`,""+(e.a+e.b-e.u)])),O(["b","c"],(e=>["P(B) * P(A|B)",`${e.b} * ${e.c}`,""+e.b*e.c])),O(["a","ci"],(e=>["P(A) * P(B|A)",`${e.a} * ${e.ci}`,""+e.a*e.ci]))],"A⋃B":[O(["a","b","i"],(e=>["P(A) + P(B) - P(A⋂B)",`${e.a} + ${e.b} - ${e.i}`,""+(e.a+e.b-e.i)])),O(["a","b","c"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(B) * P(A|B)",`${e.a} + ${e.b} - ${e.b} * ${e.c}`,""+(e.a+e.b-e.b*e.c)])),O(["a","b","ci"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B|A)",`${e.a} + ${e.b} - ${e.a} * ${e.ci}`,""+(e.a+e.b-e.a*e.ci)]))],"A|B":[O(["b","i"],(e=>["P(A⋂B) / P(B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,""+(e.a+e.i/e.a-2*e.i)])),O(["a","i","u"],(e=>["P(A⋂B) / P(B)","P(A⋂B) / (P(A⋃B) - P(A) + P(A⋂B))",`${e.i} / (${e.u} - ${e.a} + ${e.i})`,""+e.i/(e.u-e.a+e.i)])),O(["a","b","u"],(e=>["P(A⋂B) / P(B)","(P(A) + P(B) - P(A⋃B)) / P(B)",`(${e.a} + ${e.b} - ${e.u}) / ${e.b}`,""+(e.a+e.b-e.u)/e.b])),O(["a","b","ci"],(e=>["P(B|A) * P(A) / P(B)",`${e.ci} * ${e.a} / ${e.b}`,""+e.ci*e.a/e.b]))],"AΔB":[O(["a","b","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)",`${e.a} + ${e.b} - 2 * ${e.i}`,""+(e.a+e.b-2*e.i)])),O(["a","b","u"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * (P(A) + P(B) - P(A⋃B))",`${e.a} + ${e.b} - 2 * (${e.a} + ${e.b} -${e.u})`,""+(e.a+e.b-2*(e.a+e.b-e.u))]))]},W=l("dependent",{state:()=>{const e={target:R[0],optionIdx:0};for(const t of R)e[t]=[],S[t].forEach(((a,l)=>{e[t][l]=a.keys.reduce(((e,t)=>(e[t]=0,e)),{})}));return e},getters:{optionItem(){return S[this.target][this.optionIdx]},params(){return this.optionItem.keys.map((e=>({key:e,label:U[e]})))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[E(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map((e=>e(this.args)))].join("\n")}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=I(t,0,1))}}}),X={class:"w-50 mx-auto"},Y=s({__name:"DependentEvent",setup(a){const l=W(),s=R.map((e=>({title:`P(${e})`,value:e}))),o=R.reduce(((e,t)=>(e[t]=S[t].map(((e,t)=>({title:e.keys.map((e=>`P(${U[e]})`)).join(", "),value:t}))),e)),{}),i=p({get:()=>l[l.target][l.optionIdx],set([e,t]){l.setArg(e,t)}}),d=p((()=>l.formula.map(((e,t)=>0===t?[`P(${l.target})`,"= "+e]:[null,"= "+e]))));return(a,p)=>{const $=V,g=y,h=v;return t(),m(f,null,{default:P((()=>[c(_,{class:"border rounded-md px-2 py-4 text-center"},{default:P((()=>[r("div",X,[p[1]||(p[1]=b(" Euler Diagram ")),c($)]),c(g,{class:"w-100 font-weight-bold",label:"計算結果"}),c(h,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${A(l).target})=`,readonly:"",variant:"solo",flat:"","model-value":A(l).result,message:A(l).errorMessage},null,8,["prependText","model-value","message"]),c(K,{class:"mx-auto",title:"算式",formula:A(d)},{title:P((()=>[c(g,{class:"w-100 font-weight-bold",label:"算式"})])),_:1},8,["formula"])])),_:1}),c(_,{class:"border rounded-md px-2 py-4",cols:"4"},{default:P((()=>[c(h,{type:"select",label:"目標",items:A(s),"model-value":A(l).target,"onUpdate:modelValue":A(l).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),c(w,{class:"my-3"}),p[0]||(B(-1,!0),(p[0]=c(g,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,B(1),p[0]),c(h,{type:"select",label:"選項",items:A(o)[A(l).target],"model-value":A(l).optionIdx,"onUpdate:modelValue":A(l).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(t(!0),e(n,null,u(A(l).params,(({key:e,label:a})=>(t(),m(h,{key:e,label:a,prependText:`P(${a})=`,min:"0",max:"1",step:"any","model-value":A(i)[e],"onUpdate:modelValue":t=>A(l).setArg(e,t)},null,8,["label","prependText","model-value","onUpdate:modelValue"])))),128))])),_:1})])),_:1})}}}),Z=Object.assign(Y,{__name:"EventProbabilityDependentEvent"}),ee=["A","B","B|A"],te=l("bayes",{state:()=>ee.reduce(((e,t)=>(e[t]=0,e)),{}),getters:{result(){return this.A*this["B|A"]/this.B}},actions:{updateArg(e,t){this[e]=I(t,0,1)}}}),ae=s({__name:"BayesTheorem",setup(a){const l=ee.map((e=>`P(${e})=`)),s=te();return(a,o)=>{const r=y,i=v;return t(),m(f,null,{default:P((()=>[c(_,{class:"border rounded-md px-2 py-4 bg-white",cols:"5"},{default:P((()=>[o[0]||(B(-1,!0),(o[0]=c(r,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,B(1),o[0]),(t(!0),e(n,null,u(A(ee),((e,a)=>(t(),m(i,{key:e,label:e,"prepend-text":A(l)[a],min:"0",max:"1",step:"any","model-value":A(s)[e],"onUpdate:modelValue":t=>A(s).updateArg(e,t)},null,8,["label","prepend-text","model-value","onUpdate:modelValue"])))),128)),c(w,{class:"my-3"})])),_:1}),c(_,{class:"border rounded-md px-2 py-4 bg-white"},{default:P((()=>[c(r,{class:"w-100 font-weight-bold",label:"結果"}),c(i,{label:"結果","prepend-text":"P(A|B)=",readonly:"","model-value":A(s).result},null,8,["model-value"])])),_:1})])),_:1})}}}),le=Object.assign(ae,{__name:"EventProbabilityBayesTheorem"}),se=s({__name:"event-probability",setup(e){$({title:"Probability Calculator - Event Probability"});const a=j(),l=p((()=>a.tabIdx));return(e,a)=>(t(),m(k,{class:"d-flex flex-column h-100 pa-0 bg-white","max-width":"950"},{default:P((()=>[g(c(Q,null,null,512),[[h,0===A(l)]]),g(c(Z,null,null,512),[[h,1===A(l)]]),g(c(le,null,null,512),[[h,2===A(l)]])])),_:1}))}});export{se as default};
