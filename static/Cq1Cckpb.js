import{v as s,x as P,a0 as Y,a1 as M,d as w,Y as q,M as Q,y as j,K as y,J as v,C as N,z as R,i as I,F as B,B as b,A as o,G as n,H as f,t as W,N as O,a2 as U}from"./BYT725KD.js";import{_ as X}from"./DlAUqK2U.js";import{V as _,d as C,e as F,b as L,_ as z}from"./6kh-y1Of.js";import{c as H}from"./vSb8-rnT.js";import{u as Z}from"./BnPK5wo_.js";import{V as g}from"./blrUcMCx.js";import"./6NWnlv9P.js";import"./DzNS-9Xl.js";import"./ifPNFF3x.js";import"./DuUtBnw_.js";const ee={},te={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 360 240","stroke-width":"1",width:"100%",fill:"none",style:{"aspect-ratio":"9 / 5"}};function ne(e,t){return s(),P("svg",te,t[0]||(t[0]=[Y('<circle cx="130" cy="120" r="100" fill="#ff7"></circle><circle cx="230" cy="120" r="100" fill="#7ff"></circle><path d="M180 33 a100 100 0 0 0 0 174 a100 100 0 0 0 0 -174 z" fill="#7fff80"></path><circle cx="130" cy="120" r="100" stroke="#000"></circle><circle cx="230" cy="120" r="100" stroke="#000"></circle><rect x="0" y="0" width="360" height="240" stroke="#000"></rect><g text-anchor="middle" stroke="none" fill="#000" font-size="30px" font-weight="bold"><text x="90" y="132">A</text><text x="180" y="132">A⋂B</text><text x="270" y="132">B</text></g>',7)]))}const G=Object.assign(X(ee,[["render",ne]]),{__name:"EulerDiagram"}),K=e=>e>=0&&e<=1,oe=["a","b","u","i","s","p","c","ci"],h={a:"A",b:"B",u:"A⋃B",i:"A⋂B",p:"A'",c:"A|B",ci:"B|A"};oe.forEach(e=>h[h[e]]=e);const a=(e,t)=>{const r=e.includes("u"),c=e.includes("i"),u=[le];return r&&u.push(ae),c&&u.push(ie),{keys:e,validator:u,formula:t}},le=e=>Object.values(e).every(t=>K(t))?null:"事件機率需介於0~1。",ae=e=>!(e.a>e.u)&&!(e.b>e.u)?null:"事件聯集的機率不能小於個別事件發生的機率。",ie=e=>!(e.a<e.i)&&!(e.b<e.i)?null:"事件交集的機率不能大於個別事件發生的機率。",V=["A","A⋂B","A⋃B","AΔB"],k={A:[a(["p"],e=>["1 - P(A')",`1 - ${e.p}`,`${1-e.p}`]),a(["b","i"],e=>["P(A⋂B) / P(B)",`${e.i} / ${e.b}`,`${e.i/e.b}`]),a(["b","u"],e=>["P(A⋂B') / P(B')","(P(A⋃B) - P(B)) / (1 - P(B))",`(${e.u} - ${e.b}) / (1 - ${e.b})`,`${(e.u-e.b)/(1-e.b)}`])],"A⋂B":[a(["a","u"],e=>["(P(A⋃B) - P(A)) * P(A) / (1 - P(A))",`(${e.u} - ${e.a}) * ${e.a} / (1 - ${e.a})`,`${(e.u-e.a)*e.a/(1-e.a)}`]),a(["b","u"],e=>["(P(A⋃B) - P(B)) * P(B) / (1 - P(B))",`(${e.u} - ${e.b}) * ${e.b} / (1 - ${e.b})`,`${(e.u-e.b)*e.b/(1-e.b)}`]),a(["a","b"],e=>["P(A) * P(B)",`${e.a} * ${e.b}`,`${e.a*e.b}`])],"A⋃B":[a(["a","i"],e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(A⋂B) / P(A) - P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - ${e.i}`,`${e.a+e.i/e.a-e.i}`]),a(["b","i"],e=>["P(A) + P(B) - P(A⋂B)","P(A⋂B) / P(B) + P(B) - P(A⋂B)",`${e.b} + ${e.i} / ${e.b} - ${e.i}`,`${e.i/e.b+e.b-e.i}`]),a(["a","b"],e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B)",`${e.a} + ${e.b} - ${e.a} * ${e.b}`,`${e.b/e.a+e.a-e.b}`])],AΔB:[a(["a","i"],e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,`${e.a+e.i/e.a-2*e.i}`]),a(["b","i"],e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A⋂B) / P(B) + P(B) - 2 * P(A⋂B)",`${e.i} / ${e.b} + ${e.b} - 2 * ${e.i}`,`${e.b+e.i/e.b-2*e.i}`]),a(["a","b"],e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * P(A) * P(B)",`${e.a} + ${e.b} - 2 * ${e.a} * ${e.b}`,`${e.a+e.b-2*e.a*e.b}`])]},ue=M("independent",{state:()=>{const e={target:V[0],optionIdx:0};for(const t of V)e[t]=[],k[t].forEach((r,c)=>{e[t][c]=r.keys.reduce((u,d)=>(u[d]=0,u),{})});return e},getters:{optionItem(){return k[this.target][this.optionIdx]},params(){return this.optionItem.keys.map(e=>({key:e,label:h[e]}))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[K(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map(t=>t(this.args))].join(`
`)}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=H(t,0,1))}}}),re={class:"formula-table"},se={key:0},ce=w({__name:"FormulaTable",props:{title:{},formula:{}},setup(e){return(t,r)=>(s(),P("table",re,[t.title||t.$slots.title?(s(),P("caption",se,[q(t.$slots,"title",{},()=>[N(R(t.title),1)])])):Q("",!0),j("tbody",null,[(s(!0),P(y,null,v(t.formula,(c,u)=>(s(),P("tr",{key:u},[(s(!0),P(y,null,v(c,d=>(s(),P("td",{key:`${u}-${d}`},R(d),1))),128))]))),128))])]))}}),J=Object.assign(ce,{__name:"FormulaTable"}),de={class:"w-50 mx-auto"},pe=w({__name:"IndependentEvent",setup(e){const t=ue(),r=V.map(i=>({title:`P(${i})`,value:i})),c=V.reduce((i,l)=>(i[l]=k[l].map(($,p)=>({title:$.keys.map(m=>`P(${h[m]})`).join(", "),value:p})),i),{}),u=I({get(){return t[t.target][t.optionIdx]},set([i,l]){t.setArg(i,l)}}),d=I(()=>t.formula.map((i,l)=>l===0?[`P(${t.target})`,"= "+i]:[null,"= "+i]));return(i,l)=>{const $=G,p=L,m=z;return s(),B(F,null,{default:b(()=>[o(_,{class:"border rounded-md px-2 py-4 text-center"},{default:b(()=>[j("div",de,[l[1]||(l[1]=N(" Euler Diagram ")),o($)]),o(p,{class:"w-100 font-weight-bold",label:"計算結果"}),o(m,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${n(t).target})=`,readonly:"",variant:"solo",flat:"","model-value":n(t).result,message:n(t).errorMessage},null,8,["prependText","model-value","message"]),o(J,{class:"mx-auto",title:"算式",formula:d.value},{title:b(()=>[o(p,{class:"w-100 font-weight-bold",label:"算式"})]),_:1},8,["formula"])]),_:1}),o(_,{class:"border rounded-md px-2 py-4",cols:"4"},{default:b(()=>[o(m,{type:"select",label:"目標",items:n(r),"model-value":n(t).target,"onUpdate:modelValue":n(t).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),o(C,{class:"my-3"}),l[0]||(f(-1,!0),(l[0]=o(p,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,f(1),l[0]),o(m,{type:"select",label:"選項",items:n(c)[n(t).target],"model-value":n(t).optionIdx,"onUpdate:modelValue":n(t).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(s(!0),P(y,null,v(n(t).params,({key:A,label:x})=>(s(),B(m,{key:A,label:x,prependText:`P(${x})=`,min:"0",max:"1",step:"any","model-value":u.value[A],"onUpdate:modelValue":E=>n(t).setArg(A,E)},null,8,["label","prependText","model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})}}}),me=Object.assign(pe,{__name:"EventProbabilityIndependentEvent"}),T=["A","A⋂B","A⋃B","AΔB","A|B"],S={A:[a(["p"],e=>["1 - P(A')",`1 - ${e.p}`,`${1-e.p}`]),a(["b","i","u"],e=>["P(A⋃B) - P(B) + P(A⋂B)",`${e.u} - ${e.b} + ${e.i}`,`${e.u-e.b+e.i}`]),a(["b","ci"],e=>["P(A⋂B) / P(B|A)",`${e.i} / ${e.ci}`,`${e.i/e.ci}`])],"A⋂B":[a(["a","b","u"],e=>["P(A) + P(B) - P(A⋃B)",`${e.a} + ${e.b} - ${e.u}`,`${e.a+e.b-e.u}`]),a(["b","c"],e=>["P(B) * P(A|B)",`${e.b} * ${e.c}`,`${e.b*e.c}`]),a(["a","ci"],e=>["P(A) * P(B|A)",`${e.a} * ${e.ci}`,`${e.a*e.ci}`])],"A⋃B":[a(["a","b","i"],e=>["P(A) + P(B) - P(A⋂B)",`${e.a} + ${e.b} - ${e.i}`,`${e.a+e.b-e.i}`]),a(["a","b","c"],e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(B) * P(A|B)",`${e.a} + ${e.b} - ${e.b} * ${e.c}`,`${e.a+e.b-e.b*e.c}`]),a(["a","b","ci"],e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B|A)",`${e.a} + ${e.b} - ${e.a} * ${e.ci}`,`${e.a+e.b-e.a*e.ci}`])],"A|B":[a(["b","i"],e=>["P(A⋂B) / P(B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,`${e.a+e.i/e.a-2*e.i}`]),a(["a","i","u"],e=>["P(A⋂B) / P(B)","P(A⋂B) / (P(A⋃B) - P(A) + P(A⋂B))",`${e.i} / (${e.u} - ${e.a} + ${e.i})`,`${e.i/(e.u-e.a+e.i)}`]),a(["a","b","u"],e=>["P(A⋂B) / P(B)","(P(A) + P(B) - P(A⋃B)) / P(B)",`(${e.a} + ${e.b} - ${e.u}) / ${e.b}`,`${(e.a+e.b-e.u)/e.b}`]),a(["a","b","ci"],e=>["P(B|A) * P(A) / P(B)",`${e.ci} * ${e.a} / ${e.b}`,`${e.ci*e.a/e.b}`])],AΔB:[a(["a","b","i"],e=>["P(A) + P(B) - 2 * P(A⋂B)",`${e.a} + ${e.b} - 2 * ${e.i}`,`${e.a+e.b-2*e.i}`]),a(["a","b","u"],e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * (P(A) + P(B) - P(A⋃B))",`${e.a} + ${e.b} - 2 * (${e.a} + ${e.b} -${e.u})`,`${e.a+e.b-2*(e.a+e.b-e.u)}`])]},be=M("dependent",{state:()=>{const e={target:T[0],optionIdx:0};for(const t of T)e[t]=[],S[t].forEach((r,c)=>{e[t][c]=r.keys.reduce((u,d)=>(u[d]=0,u),{})});return e},getters:{optionItem(){return S[this.target][this.optionIdx]},params(){return this.optionItem.keys.map(e=>({key:e,label:h[e]}))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[K(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map(t=>t(this.args))].join(`
`)}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=H(t,0,1))}}}),Pe={class:"w-50 mx-auto"},$e=w({__name:"DependentEvent",setup(e){const t=be(),r=T.map(i=>({title:`P(${i})`,value:i})),c=T.reduce((i,l)=>(i[l]=S[l].map(($,p)=>({title:$.keys.map(m=>`P(${h[m]})`).join(", "),value:p})),i),{}),u=I({get(){return t[t.target][t.optionIdx]},set([i,l]){t.setArg(i,l)}}),d=I(()=>t.formula.map((i,l)=>l===0?[`P(${t.target})`,"= "+i]:[null,"= "+i]));return(i,l)=>{const $=G,p=L,m=z;return s(),B(F,null,{default:b(()=>[o(_,{class:"border rounded-md px-2 py-4 text-center"},{default:b(()=>[j("div",Pe,[l[1]||(l[1]=N(" Euler Diagram ")),o($)]),o(p,{class:"w-100 font-weight-bold",label:"計算結果"}),o(m,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${n(t).target})=`,readonly:"",variant:"solo",flat:"","model-value":n(t).result,message:n(t).errorMessage},null,8,["prependText","model-value","message"]),o(J,{class:"mx-auto",title:"算式",formula:n(d)},{title:b(()=>[o(p,{class:"w-100 font-weight-bold",label:"算式"})]),_:1},8,["formula"])]),_:1}),o(_,{class:"border rounded-md px-2 py-4",cols:"4"},{default:b(()=>[o(m,{type:"select",label:"目標",items:n(r),"model-value":n(t).target,"onUpdate:modelValue":n(t).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),o(C,{class:"my-3"}),l[0]||(f(-1,!0),(l[0]=o(p,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,f(1),l[0]),o(m,{type:"select",label:"選項",items:n(c)[n(t).target],"model-value":n(t).optionIdx,"onUpdate:modelValue":n(t).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(s(!0),P(y,null,v(n(t).params,({key:A,label:x})=>(s(),B(m,{key:A,label:x,prependText:`P(${x})=`,min:"0",max:"1",step:"any","model-value":n(u)[A],"onUpdate:modelValue":E=>n(t).setArg(A,E)},null,8,["label","prependText","model-value","onUpdate:modelValue"]))),128))]),_:1})]),_:1})}}}),Ae=Object.assign($e,{__name:"EventProbabilityDependentEvent"}),D=["A","B","B|A"],Be=M("bayes",{state:()=>D.reduce((e,t)=>(e[t]=0,e),{}),getters:{result(){return this.A*this["B|A"]/this.B}},actions:{updateArg(e,t){this[e]=H(t,0,1)}}}),fe=w({__name:"BayesTheorem",setup(e){const t=D.map(c=>`P(${c})=`),r=Be();return(c,u)=>{const d=L,i=z;return s(),B(F,null,{default:b(()=>[o(_,{class:"border rounded-md px-2 py-4 bg-white",cols:"5"},{default:b(()=>[u[0]||(f(-1,!0),(u[0]=o(d,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,f(1),u[0]),(s(!0),P(y,null,v(n(D),(l,$)=>(s(),B(i,{key:l,label:l,"prepend-text":n(t)[$],min:"0",max:"1",step:"any","model-value":n(r)[l],"onUpdate:modelValue":p=>n(r).updateArg(l,p)},null,8,["label","prepend-text","model-value","onUpdate:modelValue"]))),128)),o(C,{class:"my-3"})]),_:1}),o(_,{class:"border rounded-md px-2 py-4 bg-white"},{default:b(()=>[o(d,{class:"w-100 font-weight-bold",label:"結果"}),o(i,{label:"結果","prepend-text":"P(A|B)=",readonly:"","model-value":n(r).result},null,8,["model-value"])]),_:1})]),_:1})}}}),_e=Object.assign(fe,{__name:"EventProbabilityBayesTheorem"}),Ue=w({__name:"event-probability",setup(e){W({title:"Probability Calculator - Event Probability"});const t=Z(),r=I(()=>t.extTabIdx);return(c,u)=>(s(),B(g,{class:"d-flex flex-column h-100 pa-0 bg-white","max-width":"950"},{default:b(()=>[O(o(me,null,null,512),[[U,n(r)===0]]),O(o(Ae,null,null,512),[[U,n(r)===1]]),O(o(_e,null,null,512),[[U,n(r)===2]])]),_:1}))}});export{Ue as default};
