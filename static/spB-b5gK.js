import{J as t}from"./CtjArZXg.js";import{O as n,P as a,Q as r,c as s,r as e,R as i,S as m}from"./CI-EUnBD.js";const o={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.8,step:"any"}],domain:()=>({min:0,max:1,step:1}),isInDomain:(t,n)=>0===n||1===n,pdf(t,n){const{p:a}=t;return this.isInDomain(t,n)?1===n?a:1-a:0},cdf:(t,n)=>n<0?0:n<1?1-t.p:1,mean:t=>t.p,variance(t){const{p:n}=t;return n*(1-n)}},p={params:[{name:"n",tooltip:"隨機試驗次數",min:1,default:20,step:1},{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:t=>({min:0,max:t.n,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=0&&n<=t.n,pdf(t,n){const{n:r,p:s}=t;return this.isInDomain(t,n)&&0!==s&&1!==s?a(r,n)*s**n*(1-s)**(r-n):0},cdf(t,a){const{n:r,p:s}=t;return a>r?1:a<0?0:n(1-s,r-a,1+a)},mean(t){const{n:n,p:a}=t;return n*a},variance(t){const{n:n,p:a}=t;return n*a*(1-a)}},c={params:[{name:"min",tooltip:"最小值",max:t=>t.max,default:1,step:"any"},{name:"max",tooltip:"最大值",min:t=>t.min,default:100,step:"any"}],domain:t=>({...t,step:1}),isInDomain(t,n){const{min:a,max:r}=t;return Number.isInteger(n)&&a<=n&&n<=r},counts(t){const{min:n,max:a}=t;return a-n+1},pdf(t,n){return this.isInDomain(t,n)?1/this.counts(t):0},cdf(t,n){const{min:a}=t;return s((Math.floor(n)-a+1)/this.counts(t),0,1)},mean(t){const{min:n,max:a}=t;return(n+a)/2},variance(t){return(this.counts(t)**2-1)/2}},u=[["Bernoulli",o],["Binomial",p],["Geometric",{params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:()=>({min:1,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=1,pdf(t,n){const{p:a}=t;return this.isInDomain(t,n)?(1-a)**(n-1)*a:0},cdf(t,n){const{p:a}=t;return n<1?0:1-(1-a)**Math.floor(n)},mean(t){const{p:n}=t;return 1/n},variance(t){const{p:n}=t;return(1-n)/n**2}}],["Hypergeometric",{params:[{name:"N",tooltip:"樣品總數量",min:0,default:100},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:50},{name:"n",tooltip:"抽樣次數",min:0,max:t=>t.N,default:50}],domain(t){const{N:n,K:a,n:r}=t;return{min:Math.max(0,r+a-n),max:Math.min(r,a),step:1}},isInDomain(t,n){const{N:a,K:r,n:s}=t;return Number.isInteger(n)&&n>=Math.max(0,s+r-a)&&n<=Math.min(s,r)},pdf(t,n){const{N:r,K:s,n:e}=t;return this.isInDomain(t,n)?a(s,n)/a(r,e)*a(r-s,e-n):0},cdf(t,n){n=Math.floor(n);const{N:a,K:s,n:e}=t,i=Math.max(0,e+s-a);return n<i?0:n>=Math.min(e,s)?1:r(Array.from({length:n-i+1}),((n,a,r)=>n+this.pdf(t,i+r)))},mean(t){const{N:n,K:a,n:r}=t;return r*a/n},variance(t){const{N:n,K:a,n:r}=t;return r*a/n*(n-a)/n*(n-r)/(n-1)}}],["NegativeHypergeometric",{params:[{name:"N",tooltip:"樣品總數量",min:0,default:50},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:25},{name:"r",tooltip:"抽到不符合樣品的次數",min:0,max:t=>t.N-t.K,default:15}],domain(t){const{K:n}=t;return{min:0,max:n,step:1}},isInDomain(t,n){const{K:a}=t;return Number.isInteger(n)&&n>=0&&n<=a},pdf(t,n){const{N:r,K:s,r:e}=t;return this.isInDomain(t,n)?a(s+e-1,n)/a(r,s)*a(r-e-n,s-n):0},cdf(t,n){n=Math.floor(n);const{K:a}=t;return n<0?0:n>=a?1:r(Array.from({length:n+1}),((n,a,r)=>n+this.pdf(t,r)))},mean(t){const{N:n,K:a,r:r}=t;return r*a/(n-a+1)},variance(t){const{N:n,K:a,r:r}=t;return r*(n+1)*a/((n-a+1)*(n-a+2))*(1-r/(n-a+1))}}],["Uniform",c]],d=t("discrete",{state:()=>{const{args_:t,vars_:n}=i(u);return{_idx:0,_args:t,_vars:n,calc:{place:m,percentage:!0},chart:{points:200,extended:10}}},getters:{paramRanges(){return this.distrib.params.map((({name:t,min:n,max:a,step:r})=>({name:t,min:"number"==typeof n?n:null==n?void 0:n(this.args),max:"number"==typeof a?a:null==a?void 0:a(this.args),step:r})))},varDomain(){return this.distrib.domain(this.args)},args(){return this._args[this._idx]},vars(){return this._vars[this._idx]},distrib(){return u[this._idx][1]}},actions:{setCurrent(t){this._idx=t},setArg(t,n){isNaN(+n)||(this.args[t]=+n)},setVars(t,n){isNaN(+n)||(this.vars[t]=+n)},pdf(t){const{calc:{place:n}}=this;return e(this.distrib.pdf(this.args,t),n)},calcProb(t){const{calc:{place:n,percentage:a}}=this,r=this.distrib,s=Math.min(...t),i=Math.max(...t),m=a?100:1,o=m*r.pdf(this.args,s),p=m*r.pdf(this.args,i),c=m*r.cdf(this.args,s),u=m*(1-r.cdf(this.args,i-1)),d=c+u,h=m-d+o+p;return{left:e(o,n),right:e(p,n),below:e(c,n),above:e(u,n),belowExcl:e(c-o,n),aboveExcl:e(u-p,n),between:e(h,n),outside:e(d,n)}}}});export{u as d,d as u};
