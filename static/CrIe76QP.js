import{a1 as ie}from"./CUVt92CJ.js";import{X as V,Q as W,c as se,Y as ee,U as P,W as c,r as U}from"./DNJeZBBB.js";const Pe={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.8,step:"any"}],domain:()=>({min:0,max:1,step:1}),isInDomain:(t,n)=>0===n||1===n,pdf(t,n){const{p:e}=t;return this.isInDomain(t,n)?1===n?e:1-e:0},cdf:(t,n)=>n<0?0:n<1?1-t.p:1,mean:t=>t.p,variance(t){const{p:n}=t;return n*(1-n)}},Y={params:[{name:"n",tooltip:"隨機試驗次數",min:1,default:20,step:1},{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:t=>({min:0,max:t.n,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=0&&n<=t.n,pdf(t,n){const{n:e,p:a}=t;return this.isInDomain(t,n)&&0!==a&&1!==a?V(e,n)*a**n*(1-a)**(e-n):0},cdf(t,n){const{n:e,p:a}=t;return n>e?1:n<0?0:W(1-a,e-n,1+n)},mean(t){const{n:n,p:e}=t;return n*e},variance(t){const{n:n,p:e}=t;return n*e*(1-e)}},ke={params:[{name:"min",tooltip:"最小值",max:t=>t.max,default:1,step:"any"},{name:"max",tooltip:"最大值",min:t=>t.min,default:100,step:"any"}],domain:t=>({...t,step:1}),isInDomain(t,n){const{min:e,max:a}=t;return Number.isInteger(n)&&e<=n&&n<=a},counts(t){const{min:n,max:e}=t;return e-n+1},pdf(t,n){return this.isInDomain(t,n)?1/this.counts(t):0},cdf(t,n){const{min:e}=t;return se((Math.floor(n)-e+1)/this.counts(t),0,1)},mean(t){const{min:n,max:e}=t;return(n+e)/2},variance(t){return(this.counts(t)**2-1)/2}},Q={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain:()=>({min:1,step:1}),isInDomain:(t,n)=>Number.isInteger(n)&&n>=1,pdf(t,n){const{p:e}=t;return this.isInDomain(t,n)?(1-e)**(n-1)*e:0},cdf(t,n){const{p:e}=t;return n<1?0:1-(1-e)**Math.floor(n)},mean(t){const{p:n}=t;return 1/n},variance(t){const{p:n}=t;return(1-n)/n**2}},O={params:[{name:"N",tooltip:"樣品總數量",min:0,default:100},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:50},{name:"n",tooltip:"抽樣次數",min:0,max:t=>t.N,default:50}],domain(t){const{N:n,K:e,n:a}=t;return{min:Math.max(0,a+e-n),max:Math.min(a,e),step:1}},isInDomain(t,n){const{N:e,K:a,n:r}=t;return Number.isInteger(n)&&n>=Math.max(0,r+a-e)&&n<=Math.min(r,a)},pdf(t,n){const{N:e,K:a,n:r}=t;return this.isInDomain(t,n)?V(a,n)/V(e,r)*V(e-a,r-n):0},cdf(t,n){n=Math.floor(n);const{N:e,K:a,n:r}=t,i=Math.max(0,r+a-e);return n<i?0:n>=Math.min(r,a)?1:ee(Array.from({length:n-i+1}),((n,e,a)=>n+this.pdf(t,i+a)))},mean(t){const{N:n,K:e,n:a}=t;return a*e/n},variance(t){const{N:n,K:e,n:a}=t;return a*e/n*(n-e)/n*(n-a)/(n-1)}},L={params:[{name:"N",tooltip:"樣品總數量",min:0,default:50},{name:"K",tooltip:"符合樣品數量",min:0,max:t=>t.N,default:25},{name:"r",tooltip:"抽到不符合樣品的次數",min:0,max:t=>t.N-t.K,default:15}],domain(t){const{K:n}=t;return{min:0,max:n,step:1}},isInDomain(t,n){const{K:e}=t;return Number.isInteger(n)&&n>=0&&n<=e},pdf(t,n){const{N:e,K:a,r:r}=t;return this.isInDomain(t,n)?V(a+r-1,n)/V(e,a)*V(e-r-n,a-n):0},cdf(t,n){n=Math.floor(n);const{K:e}=t;return n<0?0:n>=e?1:ee(Array.from({length:n+1}),((n,e,a)=>n+this.pdf(t,a)))},mean(t){const{N:n,K:e,r:a}=t;return a*e/(n-e+1)},variance(t){const{N:n,K:e,r:a}=t;return a*(n+1)*e/((n-e+1)*(n-e+2))*(1-a/(n-e+1))}},me=Object.freeze(Object.defineProperty({__proto__:null,Bernoulli:Pe,Binomial:Y,Geometric:Q,Hypergeometric:O,NegativeHypergeometric:L,Uniform:ke},Symbol.toStringTag,{value:"Module"})),k=["Bernoulli","Binomial","Geometric","Hypergeometric","NegativeHypergeometric","Uniform"],$=ie("discrete",{state:()=>{const{args:t,vars:n}=P(me,k);return{current:k[0],__args:t,__vars:n,calc:{place:c,toPercentage:!0},chart:{points:200,extended:10}}},getters:{paramRanges(){return this.distribution.params.map((({name:t,min:n,max:e,step:a})=>({name:t,min:"number"==typeof n?n:null==n?void 0:n(this.args),max:"number"==typeof e?e:null==e?void 0:e(this.args),step:a})))},varDomain(){return this.distribution.domain(this.args)},args(){return this.__args[this.current]},vars(){return this.__vars[this.current]},distribution(){return me[this.current]}},actions:{setCurrent(t){this.current=k.includes(t)?t:k[0]},setArg(t,n){isNaN(+n)||(this.args[t]=+n)},setVars(t,n){isNaN(+n)||(this.vars[t]=+n)},pdf(t){const{calc:{place:n}}=this;return U(this.distribution.pdf(this.args,t),n)},calcProb(t){const{calc:{place:n,toPercentage:e}}=this,a=this.distribution,r=Math.min(...t),i=Math.max(...t),s=e?100:1,o=s*a.pdf(this.args,r),m=s*a.pdf(this.args,i),c=s*a.cdf(this.args,r),u=s*(1-a.cdf(this.args,i-1)),p=c+u,l=s-p+o+m;return{left:U(o,n),right:U(m,n),below:U(c,n),above:U(u,n),belowExcl:U(c-o,n),aboveExcl:U(u-m,n),between:U(l,n),outside:U(p,n)}}}});export{k as d,$ as u};