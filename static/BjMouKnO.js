import{a1 as N}from"./CMvFBe2R.js";import{X as m,Q as g,c as I,Y as _,U as y,W as D,r as s}from"./8IUFWRbi.js";const K={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.8,step:"any"}],domain(){return{min:0,max:1,step:1}},isInDomain(n,t){return t===0||t===1},pdf(n,t){const{p:e}=n;return this.isInDomain(n,t)?t===1?e:1-e:0},cdf(n,t){return t<0?0:t<1?1-n.p:1},mean(n){return n.p},variance(n){const{p:t}=n;return t*(1-t)}},v={params:[{name:"n",tooltip:"隨機試驗次數",min:1,default:20,step:1},{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain(n){return{min:0,max:n.n,step:1}},isInDomain(n,t){return Number.isInteger(t)&&t>=0&&t<=n.n},pdf(n,t){const{n:e,p:r}=n;return!this.isInDomain(n,t)||r===0||r===1?0:m(e,t)*r**t*(1-r)**(e-t)},cdf(n,t){const{n:e,p:r}=n;return t>e?1:t<0?0:g(1-r,e-t,1+t)},mean(n){const{n:t,p:e}=n;return t*e},variance(n){const{n:t,p:e}=n;return t*e*(1-e)}},x={params:[{name:"min",tooltip:"最小值",max:n=>n.max,default:1,step:"any"},{name:"max",tooltip:"最大值",min:n=>n.min,default:100,step:"any"}],domain(n){return{...n,step:1}},isInDomain(n,t){const{min:e,max:r}=n;return Number.isInteger(t)&&e<=t&&t<=r},counts(n){const{min:t,max:e}=n;return e-t+1},pdf(n,t){return this.isInDomain(n,t)?1/this.counts(n):0},cdf(n,t){const{min:e}=n;return I((Math.floor(t)-e+1)/this.counts(n),0,1)},mean(n){const{min:t,max:e}=n;return(t+e)/2},variance(n){return(this.counts(n)**2-1)/2}},M={params:[{name:"p",tooltip:"單次成功機率",min:0,max:1,default:.5,step:"any"}],domain(){return{min:1,step:1}},isInDomain(n,t){return Number.isInteger(t)&&t>=1},pdf(n,t){const{p:e}=n;return this.isInDomain(n,t)?(1-e)**(t-1)*e:0},cdf(n,t){const{p:e}=n;return t<1?0:1-(1-e)**Math.floor(t)},mean(n){const{p:t}=n;return 1/t},variance(n){const{p:t}=n;return(1-t)/t**2}},P={params:[{name:"N",tooltip:"樣品總數量",min:0,default:100},{name:"K",tooltip:"符合樣品數量",min:0,max:n=>n.N,default:50},{name:"n",tooltip:"抽樣次數",min:0,max:n=>n.N,default:50}],domain(n){const{N:t,K:e,n:r}=n;return{min:Math.max(0,r+e-t),max:Math.min(r,e),step:1}},isInDomain(n,t){const{N:e,K:r,n:i}=n;return Number.isInteger(t)&&t>=Math.max(0,i+r-e)&&t<=Math.min(i,r)},pdf(n,t){const{N:e,K:r,n:i}=n;return this.isInDomain(n,t)?m(r,t)/m(e,i)*m(e-r,i-t):0},cdf(n,t){t=Math.floor(t);const{N:e,K:r,n:i}=n,a=Math.max(0,i+r-e);return t<a?0:t>=Math.min(i,r)?1:_(Array.from({length:t-a+1}),(o,c,u)=>o+this.pdf(n,a+u))},mean(n){const{N:t,K:e,n:r}=n;return r*e/t},variance(n){const{N:t,K:e,n:r}=n;return r*e/t*(t-e)/t*(t-r)/(t-1)}},w={params:[{name:"N",tooltip:"樣品總數量",min:0,default:50},{name:"K",tooltip:"符合樣品數量",min:0,max:n=>n.N,default:25},{name:"r",tooltip:"抽到不符合樣品的次數",min:0,max:n=>n.N-n.K,default:15}],domain(n){const{K:t}=n;return{min:0,max:t,step:1}},isInDomain(n,t){const{K:e}=n;return Number.isInteger(t)&&t>=0&&t<=e},pdf(n,t){const{N:e,K:r,r:i}=n;return this.isInDomain(n,t)?m(r+i-1,t)/m(e,r)*m(e-i-t,r-t):0},cdf(n,t){t=Math.floor(t);const{K:e}=n;return t<0?0:t>=e?1:_(Array.from({length:t+1}),(r,i,a)=>r+this.pdf(n,a))},mean(n){const{N:t,K:e,r}=n;return r*e/(t-e+1)},variance(n){const{N:t,K:e,r}=n;return r*(t+1)*e/((t-e+1)*(t-e+2))*(1-r/(t-e+1))}},h=Object.freeze(Object.defineProperty({__proto__:null,Bernoulli:K,Binomial:v,Geometric:M,Hypergeometric:P,NegativeHypergeometric:w,Uniform:x},Symbol.toStringTag,{value:"Module"})),p=["Bernoulli","Binomial","Geometric","Hypergeometric","NegativeHypergeometric","Uniform"],H=N("discrete",{state:()=>{const{args:n,vars:t}=y(h,p);return{current_:p[0],__args_:n,__vars_:t,calc_:{place_:D,toPercentage_:!0},chart_:{points_:200,extended_:10}}},getters:{paramRanges(){return this.distribution.params.map(({name:n,min:t,max:e,step:r})=>({name:n,min:typeof t=="number"?t:t==null?void 0:t(this.args),max:typeof e=="number"?e:e==null?void 0:e(this.args),step:r}))},varDomain(){return this.distribution.domain(this.args)},args(){return this.__args_[this.current_]},vars(){return this.__vars_[this.current_]},distribution(){return h[this.current_]}},actions:{setCurrent(n){this.current_=p.includes(n)?n:p[0]},setArg(n,t){isNaN(+t)||(this.args[n]=+t)},setVars(n,t){isNaN(+t)||(this.vars[n]=+t)},pdf(n){const{calc_:{place_:t}}=this;return s(this.distribution.pdf(this.args,n),t)},calcProb(n){const{calc_:{place_:t,toPercentage_:e}}=this,r=this.distribution,i=Math.min(...n),a=Math.max(...n),o=e?100:1,c=o*r.pdf(this.args,i),u=o*r.pdf(this.args,a),l=o*r.cdf(this.args,i),f=o*(1-r.cdf(this.args,a-1)),d=l+f,b=o-d+c+u;return{left:s(c,t),right:s(u,t),below:s(l,t),above:s(f,t),belowExcl:s(l-c,t),aboveExcl:s(f-u,t),between:s(b,t),outside:s(d,t)}}}});export{p as d,H as u};
