import{v as U,x as O,a0 as v,a1 as Q,d as L,Y as m,M as f,y as x,K as P,J as Y,C as Z,z as R,i as W,F as a,B as ee,A as te,G as le,H as K,t as e,N as ae,a2 as B}from"./CUVt92CJ.js";import{_ as p}from"./DlAUqK2U.js";import{V as se,d as oe,e as u,b as ne,_ as re}from"./Dg_Pu0LG.js";import{c as $}from"./DNJeZBBB.js";import{u as h}from"./F6l-ztf0.js";import{V as ie}from"./D6AdTxEX.js";import"./SfClP_jH.js";import"./CO9ygHTU.js";import"./CrIe76QP.js";import"./DuUtBnw_.js";const C={},T={xmlns:"http://www.w3.org/2000/svg",version:"1.1",viewBox:"0 0 360 240","stroke-width":"1",width:"100%",fill:"none",style:{"aspect-ratio":"9 / 5"}};function ue(e,t){return U(),O("svg",T,t[0]||(t[0]=[v('<circle cx="130" cy="120" r="100" fill="#ff7"></circle><circle cx="230" cy="120" r="100" fill="#7ff"></circle><path d="M180 33 a100 100 0 0 0 0 174 a100 100 0 0 0 0 -174 z" fill="#7fff80"></path><circle cx="130" cy="120" r="100" stroke="#000"></circle><circle cx="230" cy="120" r="100" stroke="#000"></circle><rect x="0" y="0" width="360" height="240" stroke="#000"></rect><g text-anchor="middle" stroke="none" fill="#000" font-size="30px" font-weight="bold"><text x="90" y="132">A</text><text x="180" y="132">A⋂B</text><text x="270" y="132">B</text></g>',7)]))}const _=Object.assign(p(C,[["render",ue]]),{__name:"EulerDiagram"}),Pe=e=>e>=0&&e<=1,de=["a","b","u","i","s","p","c","ci"],me={a:"A",b:"B",u:"A⋃B",i:"A⋂B",p:"A'",c:"A|B",ci:"B|A"};de.forEach((e=>me[me[e]]=e));const N=(e,t)=>{const l=e.includes("u"),a=e.includes("i"),s=[Be];return l&&s.push(Ae),a&&s.push($e),{keys:e,validator:s,formula:t}},Be=e=>Object.values(e).every((e=>Pe(e)))?null:"事件機率需介於0~1。",Ae=e=>e.a>e.u||e.b>e.u?"事件聯集的機率不能小於個別事件發生的機率。":null,$e=e=>e.a<e.i||e.b<e.i?"事件交集的機率不能大於個別事件發生的機率。":null,pe=["A","A⋂B","A⋃B","AΔB"],A={A:[N(["p"],(e=>["1 - P(A')",`1 - ${e.p}`,""+(1-e.p)])),N(["b","i"],(e=>["P(A⋂B) / P(B)",`${e.i} / ${e.b}`,""+e.i/e.b])),N(["b","u"],(e=>["P(A⋂B') / P(B')","(P(A⋃B) - P(B)) / (1 - P(B))",`(${e.u} - ${e.b}) / (1 - ${e.b})`,""+(e.u-e.b)/(1-e.b)]))],"A⋂B":[N(["a","u"],(e=>["(P(A⋃B) - P(A)) * P(A) / (1 - P(A))",`(${e.u} - ${e.a}) * ${e.a} / (1 - ${e.a})`,""+(e.u-e.a)*e.a/(1-e.a)])),N(["b","u"],(e=>["(P(A⋃B) - P(B)) * P(B) / (1 - P(B))",`(${e.u} - ${e.b}) * ${e.b} / (1 - ${e.b})`,""+(e.u-e.b)*e.b/(1-e.b)])),N(["a","b"],(e=>["P(A) * P(B)",`${e.a} * ${e.b}`,""+e.a*e.b]))],"A⋃B":[N(["a","i"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(A⋂B) / P(A) - P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - ${e.i}`,""+(e.a+e.i/e.a-e.i)])),N(["b","i"],(e=>["P(A) + P(B) - P(A⋂B)","P(A⋂B) / P(B) + P(B) - P(A⋂B)",`${e.b} + ${e.i} / ${e.b} - ${e.i}`,""+(e.i/e.b+e.b-e.i)])),N(["a","b"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B)",`${e.a} + ${e.b} - ${e.a} * ${e.b}`,""+(e.b/e.a+e.a-e.b)]))],"AΔB":[N(["a","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,""+(e.a+e.i/e.a-2*e.i)])),N(["b","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A⋂B) / P(B) + P(B) - 2 * P(A⋂B)",`${e.i} / ${e.b} + ${e.b} - 2 * ${e.i}`,""+(e.b+e.i/e.b-2*e.i)])),N(["a","b"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * P(A) * P(B)",`${e.a} + ${e.b} - 2 * ${e.a} * ${e.b}`,""+(e.a+e.b-2*e.a*e.b)]))]},ce=Q("independent",{state:()=>{const e={target:pe[0],optionIdx:0};for(const t of pe)e[t]=[],A[t].forEach(((l,a)=>{e[t][a]=l.keys.reduce(((e,t)=>(e[t]=0,e)),{})}));return e},getters:{optionItem(){return A[this.target][this.optionIdx]},params(){return this.optionItem.keys.map((e=>({key:e,label:me[e]})))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[Pe(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map((e=>e(this.args)))].join("\n")}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=$(t,0,1))}}}),be={class:"formula-table"},he={key:0},d=L({__name:"FormulaTable",props:{title:{},formula:{}},setup:e=>(e,t)=>(U(),O("table",be,[e.title||e.$slots.title?(U(),O("caption",he,[m(e.$slots,"title",{},(()=>[Z(R(e.title),1)]))])):f("",!0),x("tbody",null,[(U(!0),O(P,null,Y(e.formula,((e,t)=>(U(),O("tr",{key:t},[(U(!0),O(P,null,Y(e,(e=>(U(),O("td",{key:`${t}-${e}`},R(e),1)))),128))])))),128))])]))}),fe=Object.assign(d,{__name:"FormulaTable"}),o={class:"w-50 mx-auto"},n=L({__name:"IndependentEvent",setup(e){const t=ce(),l=pe.map((e=>({title:`P(${e})`,value:e}))),s=pe.reduce(((e,t)=>(e[t]=A[t].map(((e,t)=>({title:e.keys.map((e=>`P(${me[e]})`)).join(", "),value:t}))),e)),{}),n=W({get:()=>t[t.target][t.optionIdx],set([e,l]){t.setArg(e,l)}}),r=W((()=>t.formula.map(((e,l)=>0===l?[`P(${t.target})`,"= "+e]:[null,"= "+e]))));return(e,i)=>{const d=_,m=ne,B=re;return U(),a(u,null,{default:ee((()=>[te(se,{class:"border rounded-md px-2 py-4 text-center"},{default:ee((()=>[x("div",o,[i[1]||(i[1]=Z(" Euler Diagram ")),te(d)]),te(m,{class:"w-100 font-weight-bold",label:"計算結果"}),te(B,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${le(t).target})=`,readonly:"",variant:"solo",flat:"","model-value":le(t).result,message:le(t).errorMessage},null,8,["prependText","model-value","message"]),te(fe,{class:"mx-auto",title:"算式",formula:r.value},{title:ee((()=>[te(m,{class:"w-100 font-weight-bold",label:"算式"})])),_:1},8,["formula"])])),_:1}),te(se,{class:"border rounded-md px-2 py-4",cols:"4"},{default:ee((()=>[te(B,{type:"select",label:"目標",items:le(l),"model-value":le(t).target,"onUpdate:modelValue":le(t).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),te(oe,{class:"my-3"}),i[0]||(K(-1,!0),(i[0]=te(m,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,K(1),i[0]),te(B,{type:"select",label:"選項",items:le(s)[le(t).target],"model-value":le(t).optionIdx,"onUpdate:modelValue":le(t).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(U(!0),O(P,null,Y(le(t).params,(({key:e,label:l})=>(U(),a(B,{key:e,label:l,prependText:`P(${l})=`,min:"0",max:"1",step:"any","model-value":n.value[e],"onUpdate:modelValue":l=>le(t).setArg(e,l)},null,8,["label","prependText","model-value","onUpdate:modelValue"])))),128))])),_:1})])),_:1})}}}),s=Object.assign(n,{__name:"EventProbabilityIndependentEvent"}),xe=["A","A⋂B","A⋃B","AΔB","A|B"],t={A:[N(["p"],(e=>["1 - P(A')",`1 - ${e.p}`,""+(1-e.p)])),N(["b","i","u"],(e=>["P(A⋃B) - P(B) + P(A⋂B)",`${e.u} - ${e.b} + ${e.i}`,`${e.u-e.b+e.i}`])),N(["b","ci"],(e=>["P(A⋂B) / P(B|A)",`${e.i} / ${e.ci}`,""+e.i/e.ci]))],"A⋂B":[N(["a","b","u"],(e=>["P(A) + P(B) - P(A⋃B)",`${e.a} + ${e.b} - ${e.u}`,""+(e.a+e.b-e.u)])),N(["b","c"],(e=>["P(B) * P(A|B)",`${e.b} * ${e.c}`,""+e.b*e.c])),N(["a","ci"],(e=>["P(A) * P(B|A)",`${e.a} * ${e.ci}`,""+e.a*e.ci]))],"A⋃B":[N(["a","b","i"],(e=>["P(A) + P(B) - P(A⋂B)",`${e.a} + ${e.b} - ${e.i}`,""+(e.a+e.b-e.i)])),N(["a","b","c"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(B) * P(A|B)",`${e.a} + ${e.b} - ${e.b} * ${e.c}`,""+(e.a+e.b-e.b*e.c)])),N(["a","b","ci"],(e=>["P(A) + P(B) - P(A⋂B)","P(A) + P(B) - P(A) * P(B|A)",`${e.a} + ${e.b} - ${e.a} * ${e.ci}`,""+(e.a+e.b-e.a*e.ci)]))],"A|B":[N(["b","i"],(e=>["P(A⋂B) / P(B)","P(A) + P(A⋂B) / P(A) - 2 * P(A⋂B)",`${e.a} + ${e.i} / ${e.a} - 2 * ${e.i}`,""+(e.a+e.i/e.a-2*e.i)])),N(["a","i","u"],(e=>["P(A⋂B) / P(B)","P(A⋂B) / (P(A⋃B) - P(A) + P(A⋂B))",`${e.i} / (${e.u} - ${e.a} + ${e.i})`,""+e.i/(e.u-e.a+e.i)])),N(["a","b","u"],(e=>["P(A⋂B) / P(B)","(P(A) + P(B) - P(A⋃B)) / P(B)",`(${e.a} + ${e.b} - ${e.u}) / ${e.b}`,""+(e.a+e.b-e.u)/e.b])),N(["a","b","ci"],(e=>["P(B|A) * P(A) / P(B)",`${e.ci} * ${e.a} / ${e.b}`,""+e.ci*e.a/e.b]))],"AΔB":[N(["a","b","i"],(e=>["P(A) + P(B) - 2 * P(A⋂B)",`${e.a} + ${e.b} - 2 * ${e.i}`,""+(e.a+e.b-2*e.i)])),N(["a","b","u"],(e=>["P(A) + P(B) - 2 * P(A⋂B)","P(A) + P(B) - 2 * (P(A) + P(B) - P(A⋃B))",`${e.a} + ${e.b} - 2 * (${e.a} + ${e.b} -${e.u})`,""+(e.a+e.b-2*(e.a+e.b-e.u))]))]},i=Q("dependent",{state:()=>{const e={target:xe[0],optionIdx:0};for(const l of xe)e[l]=[],t[l].forEach(((t,a)=>{e[l][a]=t.keys.reduce(((e,t)=>(e[t]=0,e)),{})}));return e},getters:{optionItem(){return t[this.target][this.optionIdx]},params(){return this.optionItem.keys.map((e=>({key:e,label:me[e]})))},formula(){return this.optionItem.formula(this.args)},args(){return this[this.target][this.optionIdx]},result(){const e=this.formula;return+e[e.length-1]},errorMessage(){return[Pe(this.result)?null:`計算結果 P(${this.target})=${this.result} 無效。`,...this.optionItem.validator.map((e=>e(this.args)))].join("\n")}},actions:{updateTarget(e){this.target=e,this.optionIdx=0},setOption(e){this.optionIdx=+e},setArg(e,t){isNaN(+t)||(this.args[e]=$(t,0,1))}}}),ye={class:"w-50 mx-auto"},ge=L({__name:"DependentEvent",setup(e){const l=i(),s=xe.map((e=>({title:`P(${e})`,value:e}))),o=xe.reduce(((e,l)=>(e[l]=t[l].map(((e,t)=>({title:e.keys.map((e=>`P(${me[e]})`)).join(", "),value:t}))),e)),{}),n=W({get:()=>l[l.target][l.optionIdx],set([e,t]){l.setArg(e,t)}}),r=W((()=>l.formula.map(((e,t)=>0===t?[`P(${l.target})`,"= "+e]:[null,"= "+e]))));return(e,t)=>{const i=_,d=ne,m=re;return U(),a(u,null,{default:ee((()=>[te(se,{class:"border rounded-md px-2 py-4 text-center"},{default:ee((()=>[x("div",ye,[t[1]||(t[1]=Z(" Euler Diagram ")),te(i)]),te(d,{class:"w-100 font-weight-bold",label:"計算結果"}),te(m,{class:"mx-auto",label:"計算結果",type:"text",prependText:`P(${le(l).target})=`,readonly:"",variant:"solo",flat:"","model-value":le(l).result,message:le(l).errorMessage},null,8,["prependText","model-value","message"]),te(fe,{class:"mx-auto",title:"算式",formula:le(r)},{title:ee((()=>[te(d,{class:"w-100 font-weight-bold",label:"算式"})])),_:1},8,["formula"])])),_:1}),te(se,{class:"border rounded-md px-2 py-4",cols:"4"},{default:ee((()=>[te(m,{type:"select",label:"目標",items:le(s),"model-value":le(l).target,"onUpdate:modelValue":le(l).updateTarget},null,8,["items","model-value","onUpdate:modelValue"]),te(oe,{class:"my-3"}),t[0]||(K(-1,!0),(t[0]=te(d,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,K(1),t[0]),te(m,{type:"select",label:"選項",items:le(o)[le(l).target],"model-value":le(l).optionIdx,"onUpdate:modelValue":le(l).setOption},null,8,["items","model-value","onUpdate:modelValue"]),(U(!0),O(P,null,Y(le(l).params,(({key:e,label:t})=>(U(),a(m,{key:e,label:t,prependText:`P(${t})=`,min:"0",max:"1",step:"any","model-value":le(n)[e],"onUpdate:modelValue":t=>le(l).setArg(e,t)},null,8,["label","prependText","model-value","onUpdate:modelValue"])))),128))])),_:1})])),_:1})}}}),ve=Object.assign(ge,{__name:"EventProbabilityDependentEvent"}),c=["A","B","B|A"],_e=Q("bayes",{state:()=>c.reduce(((e,t)=>(e[t]=0,e)),{}),getters:{result(){return this.A*this["B|A"]/this.B}},actions:{updateArg(e,t){this[e]=$(t,0,1)}}}),r=L({__name:"BayesTheorem",setup(e){const t=c.map((e=>`P(${e})=`)),l=_e();return(e,s)=>{const o=ne,n=re;return U(),a(u,null,{default:ee((()=>[te(se,{class:"border rounded-md px-2 py-4 bg-white",cols:"5"},{default:ee((()=>[s[0]||(K(-1,!0),(s[0]=te(o,{class:"w-100 font-weight-bold",label:"參數"})).cacheIndex=0,K(1),s[0]),(U(!0),O(P,null,Y(le(c),((e,s)=>(U(),a(n,{key:e,label:e,"prepend-text":le(t)[s],min:"0",max:"1",step:"any","model-value":le(l)[e],"onUpdate:modelValue":t=>le(l).updateArg(e,t)},null,8,["label","prepend-text","model-value","onUpdate:modelValue"])))),128)),te(oe,{class:"my-3"})])),_:1}),te(se,{class:"border rounded-md px-2 py-4 bg-white"},{default:ee((()=>[te(o,{class:"w-100 font-weight-bold",label:"結果"}),te(n,{label:"結果","prepend-text":"P(A|B)=",readonly:"","model-value":le(l).result},null,8,["model-value"])])),_:1})])),_:1})}}}),z=Object.assign(r,{__name:"EventProbabilityBayesTheorem"}),we=L({__name:"event-probability",setup(t){e({title:"Probability Calculator - Event Probability"});const l=h(),o=W((()=>l.extTabIdx));return(e,t)=>(U(),a(ie,{class:"d-flex flex-column h-100 pa-0 bg-white","max-width":"950"},{default:ee((()=>[ae(te(s,null,null,512),[[B,0===le(o)]]),ae(te(ve,null,null,512),[[B,1===le(o)]]),ae(te(z,null,null,512),[[B,2===le(o)]])])),_:1}))}});export{we as default};